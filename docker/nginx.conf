worker_processes 1;  

events { worker_connections 1024; }  

http {  
    include /etc/nginx/mime.types;
    default_type application/octet-stream;
    
    # Enable for debugging
    access_log /dev/stdout;
    error_log /dev/stderr;

    server {  
        listen 80;  
        server_name localhost;  

        # Root location to serve the website files
        location / { 
            root /nzcvm_config;  # Path to the cloned repository
            index index.html index.htm;  # Default files to serve
            autoindex on;  # Enable directory listing if no index file exists
            try_files $uri $uri/ =404;  # Return 404 if the file doesn't exist
        }

        # Explicit handling for /nzcvm_config/ with trailing slash preservation
        location /nzcvm_config/ { 
            alias /nzcvm_config/;  # Note the trailing slash is important
            index index.html index.htm;  
            autoindex on;  
            try_files $uri $uri/ =404;  
        }
        
        # Handle /nzcvm_config without trailing slash
        location = /nzcvm_config {
            return 301 $scheme://$host:$server_port/nzcvm_config/;
        }
    }
}
