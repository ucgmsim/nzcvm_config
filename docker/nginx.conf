# Sets the number of worker processes that Nginx will spawn. In this case, only 1 worker process is created.
worker_processes 1;  

# Begins the events block and sets the maximum number of simultaneous connections per worker process to 1024.
events { worker_connections 1024; }  

# Starts the HTTP configuration block where settings for handling HTTP requests are defined.
http {  

    # Includes the MIME types configuration file that maps file extensions to MIME types.
    # This ensures that files are served with the correct Content-Type header.
    include /etc/nginx/mime.types;  # <- Ensures proper MIME types!  
    default_type application/octet-stream;

    # Starts a server block which defines the configuration for a virtual server handling HTTP requests.
    server {  

        # Instructs the server to listen for incoming HTTP requests on port 80.
        listen 80;  

        # Sets the server name to "localhost". This server block will handle requests directed to the hostname "localhost".
        server_name localhost;  

        # Root location to serve the website files
        location / { 
            root /nzcvm_config;  # Path to the cloned repository
            index index.html index.htm;  # Default files to serve
            autoindex on;  # Enable directory listing if no index file exists
            try_files $uri $uri/ =404;  # Return 404 if the file doesn't exist
        }

        # Begins a location block that matches requests starting with the URI `/nzgd`.
        # This block defines how requests to that path should be handled.
        location /nzcvm_config { 
            alias /nzcvm_config;  # Path to the cloned repository directory
            index index.html index.htm;  # Default files to serve
            autoindex on;  # Enable directory listing if no index file exists
            try_files $uri $uri/ =404;  # Return 404 if the file doesn't exist
        }  # Closes the location block.

    }  # Closes the server block.

}  # Closes the HTTP configuration block.
